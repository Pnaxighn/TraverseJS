<!DOCTYPE html>
<html>
  <head>
    <title>Garden of Forking Paths</title>
    <script type="text/javascript" src="../Traverse.js"></script>
    <script type="text/javascript" src="Garden.js"></script>
    <script type="text/javascript">
	with ( TraverseCore ) {
/*
		new Action("foo", [function(){alert('foo');}]);
		new Action("bar", [function(){alert('bar');}], [function(){return true;}]);
		new Action("baz", [function(){alert('baz');}], [function(){return false;}]);
		ResolveAction("foo").Run();
		ResolveAction("bar").Run();
		ResolveAction("baz").Run();
*/

function WhatNow()
{
	var avail = GetAllEligibleActions();
	var s ="";
	for ( var i in avail )
		s += avail[i].Name + "\n";
	alert( s );
}

		CreateChoice( "Barbara Marries", [ { "Name":"Charles", Results:[] }, { "Name":"William", Results:[] } ], [] );
		GetOnceAction( "Charles Cheats", [ function(){alert('cheated!');} ], [ ChoiceMade( "Barbara Marries Charles" ) ] );
		WhatNow()
		ResolveAction( "Barbara Marries Charles" ).Run();
		WhatNow()
		ResolveAction( "Charles Cheats" ).Run();
		WhatNow()
	}
      Traverse.start(document.getElementById("choices"));
    </script>
  </head>
  <body>
    <div id="choices"></div>
  </body>
</html>